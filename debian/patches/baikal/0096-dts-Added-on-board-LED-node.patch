From 422d423c7b5d3eec2906e6527b99b2371e1c4e53 Mon Sep 17 00:00:00 2001
From: Vitaly Miniakhmetov <vitaliy.miniakhmetov@elpitech.ru>
Date: Fri, 1 Oct 2021 12:38:37 +0500
Subject: [PATCH 096/106] dts: Added on-board LED node

---
 arch/arm64/boot/dts/baikal/bm-mbm.dtsi               | 8 ++++++++
 arch/arm64/configs/edelweiss_e107_mb_a0_defconfig    | 4 ++++
 arch/arm64/configs/edelweiss_tf307_mb_d_defconfig    | 4 ++++
 arch/arm64/configs/elpitech_et101_mb_a1_a2_defconfig | 4 ++++
 arch/arm64/configs/tp_baikal_defconfig               | 4 ++++
 5 files changed, 24 insertions(+)

diff --git a/arch/arm64/boot/dts/baikal/bm-mbm.dtsi b/arch/arm64/boot/dts/baikal/bm-mbm.dtsi
index 4a39009a4d42..377333179f54 100644
--- a/arch/arm64/boot/dts/baikal/bm-mbm.dtsi
+++ b/arch/arm64/boot/dts/baikal/bm-mbm.dtsi
@@ -14,6 +14,14 @@ / {
 
 	chosen { };
 
+	leds {
+		compatible = "gpio-leds";
+		led0 {
+			gpios = <&porta 8 GPIO_ACTIVE_HIGH>;
+			default-state = "keep";
+		};
+	};
+
 	sound {
 		compatible = "simple-audio-card";
 		simple-audio-card,name = "MITX-Sound-Card";
diff --git a/arch/arm64/configs/edelweiss_e107_mb_a0_defconfig b/arch/arm64/configs/edelweiss_e107_mb_a0_defconfig
index 443392c72516..ad528b5bf49c 100644
--- a/arch/arm64/configs/edelweiss_e107_mb_a0_defconfig
+++ b/arch/arm64/configs/edelweiss_e107_mb_a0_defconfig
@@ -198,6 +198,10 @@ CONFIG_MMC=y
 CONFIG_MMC_SDHCI=y
 CONFIG_MMC_SDHCI_PLTFM=y
 CONFIG_MMC_SDHCI_OF_DWCMSHC=y
+CONFIG_LEDS_CLASS=y
+CONFIG_LEDS_GPIO=y
+CONFIG_LEDS_USER=y
+CONFIG_LEDS_TRIGGER_HEARTBEAT=y
 CONFIG_RTC_CLASS=y
 CONFIG_RTC_DRV_ABEOZ9=y
 CONFIG_RTC_DRV_PCF2127=y
diff --git a/arch/arm64/configs/edelweiss_tf307_mb_d_defconfig b/arch/arm64/configs/edelweiss_tf307_mb_d_defconfig
index 58b5684a6318..e1949dbdd69f 100644
--- a/arch/arm64/configs/edelweiss_tf307_mb_d_defconfig
+++ b/arch/arm64/configs/edelweiss_tf307_mb_d_defconfig
@@ -379,6 +379,10 @@ CONFIG_MMC=y
 CONFIG_MMC_SDHCI=y
 CONFIG_MMC_SDHCI_PLTFM=y
 CONFIG_MMC_SDHCI_OF_DWCMSHC=y
+CONFIG_LEDS_CLASS=y
+CONFIG_LEDS_GPIO=y
+CONFIG_LEDS_USER=y
+CONFIG_LEDS_TRIGGER_HEARTBEAT=y
 CONFIG_INFINIBAND=m
 CONFIG_RTC_CLASS=y
 CONFIG_RTC_DRV_ABEOZ9=y
diff --git a/arch/arm64/configs/elpitech_et101_mb_a1_a2_defconfig b/arch/arm64/configs/elpitech_et101_mb_a1_a2_defconfig
index 58b5684a6318..e1949dbdd69f 100644
--- a/arch/arm64/configs/elpitech_et101_mb_a1_a2_defconfig
+++ b/arch/arm64/configs/elpitech_et101_mb_a1_a2_defconfig
@@ -379,6 +379,10 @@ CONFIG_MMC=y
 CONFIG_MMC_SDHCI=y
 CONFIG_MMC_SDHCI_PLTFM=y
 CONFIG_MMC_SDHCI_OF_DWCMSHC=y
+CONFIG_LEDS_CLASS=y
+CONFIG_LEDS_GPIO=y
+CONFIG_LEDS_USER=y
+CONFIG_LEDS_TRIGGER_HEARTBEAT=y
 CONFIG_INFINIBAND=m
 CONFIG_RTC_CLASS=y
 CONFIG_RTC_DRV_ABEOZ9=y
diff --git a/arch/arm64/configs/tp_baikal_defconfig b/arch/arm64/configs/tp_baikal_defconfig
index 6a444d424d41..d8d44d691348 100644
--- a/arch/arm64/configs/tp_baikal_defconfig
+++ b/arch/arm64/configs/tp_baikal_defconfig
@@ -758,6 +758,10 @@ CONFIG_MMC_SDHCI=y
 CONFIG_MMC_SDHCI_PLTFM=y
 CONFIG_MMC_SDHCI_OF_DWCMSHC=y
 CONFIG_MMC_CQHCI=m
+CONFIG_LEDS_CLASS=y
+CONFIG_LEDS_GPIO=y
+CONFIG_LEDS_USER=y
+CONFIG_LEDS_TRIGGER_HEARTBEAT=y
 CONFIG_INFINIBAND=m
 CONFIG_RTC_CLASS=y
 CONFIG_RTC_DRV_ABEOZ9=y
-- 
2.33.0

